<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
			   xmlns:s="library://ns.adobe.com/flex/spark"
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:local="*"
			   addedToStage="onAddToStageHandler()">
	<s:layout>
		<s:HorizontalLayout/>
	</s:layout>
	<fx:Declarations>
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import control.LoadFileDataCommand;
			
			import model.ImportDataProxy;
			
			import mx.controls.Alert;
			
			[Bindable]
			private var importDataProxy:ImportDataProxy;
			
			private function onAddToStageHandler():void{
				importDataProxy = ImportDataProxy.getInstance();
				if(loaderInfo){
					loaderInfo.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR, onUncaughtErrorHandler);
					var _data:String = loaderInfo.parameters["data"];
					if(_data){
						LoadFileDataCommand.instance.load(_data);
					}
				}
			}
			
			private function navIndexChangeHandler(event:Event):void{
				switch(event.target.selectedChild){
					case navTexture:
						/*if(flaData.textureDisplay){
							if(textureContainer.numChildren > 0){
								textureContainer.removeChildAt(0);
							}
							textureContainer.addChild(flaData.textureDisplay);
							textureContainerGroup.width = flaData.textureDisplay.width;
							textureContainerGroup.height = flaData.textureDisplay.height;
						}*/
						break;
				}
			}
			
			private function onUncaughtErrorHandler(_e:UncaughtErrorEvent):void{
				Alert.show(String(_e.error));
			}
		]]>
	</fx:Script>
	<mx:TabNavigator width="100%" height="100%" paddingTop="0" change="navIndexChangeHandler(event)">
		<s:NavigatorContent width="100%" height="100%" label="Skeleton">
			<local:SkeletonPanel/>
		</s:NavigatorContent>
		<s:NavigatorContent width="100%" height="100%" label="XML">
			<s:TextArea left="0" right="0" top="0" bottom="0" editable="false" text="{importDataProxy.skeletonXML}"/>
		</s:NavigatorContent>
		<s:NavigatorContent id="navTexture" width="100%" height="100%" label="Texture">
			<s:Scroller width="100%" height="100%">
				<s:Group>
					<s:Group id="textureContainerGroup">
						<mx:UIComponent id="textureContainer"/>
					</s:Group>
				</s:Group>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent width="100%" height="100%" label="Tools">
		</s:NavigatorContent>
	</mx:TabNavigator>
</s:Application>
